document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("debug");function n(n){console.log(n),e&&(e.style.display="block",e.innerHTML+=n+"<br>")}const t=new URLSearchParams(window.location.search),d=decodeURIComponent(t.get("url")||""),c=parseInt(t.get("tabId")||"-1");n(`URL: ${d}`),n(`TabId: ${c}`),document.querySelectorAll("#url-display, #url-display-result").forEach((e=>{e&&(e.innerText=d.length>50?d.substring(0,50)+"...":d,e.title=d)})),document.getElementById("proceed-btn").addEventListener("click",(()=>{n("Proceed clicked, approving URL and navigating"),d&&chrome.runtime.sendMessage({type:"APPROVE_URL",url:d},(e=>{n("URL approved, navigating"),window.location.href=d}))})),document.getElementById("cancel-btn").addEventListener("click",(()=>{n("Cancel clicked, going back"),window.history.back()})),setTimeout((()=>{n("Showing verdict after timeout"),document.getElementById("scanning").style.display="none",document.getElementById("verdict").classList.add("visible"),document.getElementById("proceed-btn").focus()}),2e3)}));